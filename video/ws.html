<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<img id="img" src="#" alt="图片没过来">
<script>
    var client = new WebSocket('ws://192.168.4.96:9092');

    var img=document.getElementById('img');

    var str="";

    var i=0;

    client.open=function(){
        console.log('open');
    }

    client.onmessage=function(e){
        if(e.data=="start"){
            str="";
        }else if(e.data!="end"){
            str+= e.data;
        }else{
            img.src=str;
        }
        console.log("#"+i+" "+e.data);
        i++;
    }

    client.onclose=function(){
        console.log("WebSocketClosed!");
    }

    client.onerror=function(evt){
        console.log(evt.data);
    }
</script>
</body>
</html>